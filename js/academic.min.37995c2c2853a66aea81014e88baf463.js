/* Source Themes Academic v3.1.1 | https://sourcethemes.com/academic/ */

;
(function(a){let i=a('.navbar'),b=i.innerHeight();function d(c){c=typeof c=='undefined'||typeof c=='object'?window.location.hash:c,c=c.replace(/:/g,'\\:'),a(c).length&&(a('body').addClass('scrolling'),a('html, body').animate({scrollTop:a(c).offset().top-b},600,function(){a('body').removeClass('scrolling')}))}function h(){let c=a('body'),d=c.data('bs.scrollspy');d&&(d._config.offset=b,c.data('bs.scrollspy',d),c.scrollspy('refresh'))}window.addEventListener("hashchange",d),a('#navbar-main li.nav-item a.nav-link').on('click',function(d){let c=this.hash;c&&a(c).length&&a("#homepage").length>0&&(d.preventDefault(),a('html, body').animate({scrollTop:a(c).offset().top-b},800))}),a('#back_to_top').on('click',function(b){b.preventDefault(),a('html, body').animate({scrollTop:0},800,function(){window.location.hash=""})}),a(document).on('click','.navbar-collapse.show',function(b){let c=a(b.target).is('a')?a(b.target):a(b.target).parent();c.is('a')&&c.attr('class')!='dropdown-toggle'&&a(this).collapse('hide')});let e=a('#container-publications');e.isotope({itemSelector:'.isotope-item',percentPosition:!0,masonry:{columnWidth:'.grid-sizer'}});let c={};function g(a){let b='';for(let c in a)b+=a[c];return b}a('.pub-filters').on('change',function(){let d=a(this),b=d[0].getAttribute('data-filter-group');c[b]=this.value;let f=g(c);if(e.isotope({filter:f}),b=="pubtype"){let b=a(this).val();b.substr(0,9)=='.pubtype-'?window.location.hash=b.substr(9):window.location.hash=''}});function j(){let b=window.location.hash.replace('#',''),d='*';b!=''&&!isNaN(b)&&(d='.pubtype-'+b);let f='pubtype';c[f]=d;let h=g(c);e.isotope({filter:h}),a('.pubtype-select').val(d)}function k(){if(a('#map').length){let f=a('#map-provider').val(),b=a('#map-lat').val(),c=a('#map-lng').val(),d=parseInt(a('#map-zoom').val()),e=a('#map-dir').val(),g=a('#map-api-key').val();if(f==1){let a=new GMaps({div:'#map',lat:b,lng:c,zoom:d,zoomControl:!0,zoomControlOpt:{style:'SMALL',position:'TOP_LEFT'},panControl:!1,streetViewControl:!1,mapTypeControl:!1,overviewMapControl:!1,scrollwheel:!0,draggable:!0});a.addMarker({lat:b,lng:c,click:function(d){let a='https://www.google.com/maps/place/'+encodeURIComponent(e)+'/@'+b+','+c+'/';window.open(a,'_blank')},title:e})}else{let a=new L.map('map').setView([b,c],d);f==3&&g.length?L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}',{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',maxZoom:18,id:'mapbox.streets',accessToken:g}).addTo(a):L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(a);let h=L.marker([b,c]).addTo(a),i=b+','+c+'#map='+d+'/'+b+'/'+c+'&layers=N';h.bindPopup(e+'<p><a href="https://www.openstreetmap.org/directions?engine=osrm_car&route='+i+'">Routing via OpenStreetMap</a></p>')}}}function l(b,c){a.getJSON('https://api.github.com/repos/'+c+'/tags').done(function(c){let d=c[0];a(b).append(d.name)}).fail(function(d,a,b){let c=a+", "+b;console.log("Request Failed: "+c)})}function f(){a('body').hasClass('searching')?(a('[id=search-query]').blur(),a('body').removeClass('searching')):(a('body').addClass('searching'),a('.search-results').css({opacity:0,visibility:'visible'}).animate({opacity:1},200),a('#search-query').focus())}a(window).on('load',function(){window.location.hash&&(window.location.hash=="#top"?window.location.hash="":a('.projects-container').length||d());let e=a('body');e.scrollspy({offset:b});let c;a(window).resize(function(){clearTimeout(c),c=setTimeout(h,200)}),a('.projects-container').each(function(g,f){let b=a(f),c=b.closest('section'),e='masonry';c.find('.isotope').hasClass('js-layout-row')&&(e='fitRows'),b.imagesLoaded(function(){b.isotope({itemSelector:'.isotope-item',layoutMode:e,filter:c.find('.default-project-filter').text()}),c.find('.project-filters a').click(function(){let c=a(this).attr('data-filter');return b.isotope({filter:c}),a(this).removeClass('active').addClass('active').siblings().removeClass('active all'),!1}),window.location.hash&&d()})}),a('.pub-filters-select')&&j(),a('.js-cite-modal').click(function(d){d.preventDefault();let b=a(this).attr('data-filename'),c=a('#modal');c.find('.modal-body code').load(b,function(e,d,c){if(d=='error'){let b="Error: ";a('#modal-error').html(b+c.status+" "+c.statusText)}else a('.js-download-cite').attr('href',b)}),c.modal('show')}),a('.js-copy-cite').click(function(b){b.preventDefault();let a=document.createRange(),c=document.querySelector('#modal .modal-body');a.selectNode(c),window.getSelection().addRange(a);try{document.execCommand('copy')}catch(a){console.log('Error: citation copy failed.')}window.getSelection().removeRange(a)}),k(),a('#TableOfContents > ul > li > ul').unwrap().unwrap(),a('#academic-release').length>0&&l('#academic-release',a('#academic-release').data('repo')),a('.js-search').click(function(a){a.preventDefault(),f()}),a(document).on('keydown',function(b){b.which==27?a('body').hasClass('searching')&&f():b.which==191&&(b.preventDefault(),f())})})})(jQuery);let fuseOptions={shouldSort:!0,includeMatches:!0,tokenize:!0,threshold:0,location:0,distance:100,maxPatternLength:32,minMatchCharLength:2,keys:[{name:'title',weight:.8},{name:'summary',weight:.6},{name:'content',weight:.5},{name:'tags',weight:.3}]},summaryLength=60;function getSearchQuery(a){return decodeURIComponent((location.search.split(a+'=')[1]||'').split('&')[0]).replace(/\+/g,' ')}function updateURL(a){history.pushState&&window.history.pushState({path:a},'',a)}function initSearch(b,c){let a=$("#search-query").val();if(a.length<1&&$('#search-hits').empty(),!b&&a.length<fuseOptions.minMatchCharLength)return;$('#search-hits').empty(),searchAcademic(a,c);let d=window.location.protocol+"//"+window.location.host+window.location.pathname+'?q='+encodeURIComponent(a)+window.location.hash;updateURL(d)}function searchAcademic(b,c){let a=c.search(b);a.length>0?($('#search-hits').append('<h3 class="mt-0">'+a.length+' '+i18n.results+'</h3>'),parseResults(b,a)):$('#search-hits').append('<div class="search-no-results">'+i18n.no_results+'</div>')}function parseResults(a,b){$.each(b,function(g,b){let d=b.item.content,e="",f=[];fuseOptions.tokenize?f.push(a):$.each(b.matches,function(b,a){if(a.key=="content"){let b=a.indices[0][0]-summaryLength>0?a.indices[0][0]-summaryLength:0,c=a.indices[0][1]+summaryLength<d.length?a.indices[0][1]+summaryLength:d.length;e+=d.substring(b,c),f.push(a.value.substring(a.indices[0][0],a.indices[0][1]-a.indices[0][0]+1))}}),e.length<1&&(e+=d.substring(0,summaryLength*2));var h=$('#search-hit-fuse-template').html();let c=b.item.section;c in content_type&&(c=content_type[c]);let i={key:g,title:b.item.title,type:c,relpermalink:b.item.relpermalink,snippet:e},j=render(h,i);$('#search-hits').append(j),$.each(f,function(b,a){$("#summary-"+g).mark(a)})})}function render(a,c){let b,d,e;for(b in c)d='\\{\\{\\s*'+b+'\\s*\\}\\}',e=new RegExp(d,'g'),a=a.replace(e,c[b]);return a}typeof Fuse=='function'&&$.getJSON(search_index_filename,function(b){let a=new Fuse(b,fuseOptions);(query=getSearchQuery('q'))&&($("body").addClass('searching'),$('.search-results').css({opacity:0,visibility:"visible"}).animate({opacity:1},200),$("#search-query").val(query),$("#search-query").focus(),initSearch(!0,a)),$('#search-query').keyup(function(b){clearTimeout($.data(this,'searchTimer')),b.keyCode==13?initSearch(!0,a):$(this).data('searchTimer',setTimeout(function(){initSearch(!1,a)},250))})})